@component-name = "portal-content-management"
definition {

	property ci.retries.disabled = "true";
	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Web Content Display";

	setUp {
		task ("Set up instance and sign in") {
			TestCase.setUpPortalInstance();

			User.firstLoginPG();
		}

		task ("Add a site") {
			HeadlessSite.addSite(siteName = "Test Site Name");
		}

		task ("Add a content page") {
			JSONLayout.addPublicLayout(
				groupName = "Test Site Name",
				layoutName = "Content Page Name",
				type = "content");
		}
	}

	@description = "This is a test for LPS-147579. View expired message of web content on Content Display fragment."
	@priority = 4
	test ViewExpiredWebContent {
		task ("Given a page creator has a displayed web content on Content Display Fragment") {
			task ("Add a web content") {
				JSONWebcontent.addWebContent(
					content = "Web Content Content",
					groupName = "Test Site Name",
					title = "Web Content Title");
			}

			task ("Add a Content Display to a content page") {
				ContentPagesNavigator.openEditContentPage(
					pageName = "Content Page Name",
					siteName = "Test Site Name");

				PageEditor.addFragment(
					collectionName = "Content Display",
					fragmentName = "Content Display");
			}

			task ("Select the web content in Content Display") {
				PageEditor.editContentDisplay(
					fragmentName = "Content Display",
					webcontent = "true",
					webContentContent = "Web Content Content",
					webContentTitle = "Web Content Title");
			}
		}

		task ("When the page creator expires the web content") {
			WebContentNavigator.openWebContentAdmin(siteURLKey = "test-site-name");

			WebContent.expireCP(webContentTitleList = "Web Content Title");
		}

		task ("Then the page creator should see an expired message on Content Display") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Content Page Name",
				siteName = "Test Site Name");

			Alert.viewWarningSpecific(warningMessage = "Web Content Title is expired.");
		}
	}

}