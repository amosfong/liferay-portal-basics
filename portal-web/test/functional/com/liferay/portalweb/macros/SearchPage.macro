definition {

	@summary = "Default summary"
	macro addSortOption(displayLabel = null, indexedField = null, order = null) {
		Click(
			key_text = "Add Option",
			locator1 = "Button#ANY");

		Type.type(
			locator1 = "Search#SORT_WIDGET_CONFIGURATION_EMPTY_INDEXED_FIELD",
			value1 = ${indexedField});

		Type.type(
			locator1 = "Search#SORT_WIDGET_CONFIGURATION_EMPTY_DISPLAY_LABEL",
			value1 = ${displayLabel});

		Select(
			key_displayLabel = ${displayLabel},
			locator1 = "Search#SORT_WIDGET_CONFIGURATION_ORDER_DROPDOWN",
			value1 = ${order});
	}

	@summary = "Default summary"
	macro addWidgets(searchPortletList = null) {
		if (!(isSet(column))) {
			var column = 1;
		}

		if (!(isSet(groupName))) {
			var groupName = "Guest";
		}

		if (!(isSet(layoutName))) {
			var layoutName = "Search";
		}

		for (var portletName : list ${searchPortletList}) {
			JSONLayout.addWidgetToPublicLayout(
				column = ${column},
				groupName = ${groupName},
				layoutName = ${layoutName},
				widgetName = ${portletName});
		}
	}

	@summary = "Default summary"
	macro addWidgetsOnContentPageViaUI(searchPortletList = null) {
		PageEditor.assertFragmentSidebarLoaded();

		PageEditor.gotoTab(tabName = "Fragments and Widgets");

		Navigator.gotoNavTab(navTab = "Widgets");

		Type.sendKeysApplicationSearch(
			locator1 = "PageEditor#FRAGMENTS_AND_WIDGETS_SEARCH_FIELD",
			value1 = "Search");

		for (var portletName : list ${searchPortletList}) {
			if (isSet(previousPortletName)) {
				DragAndDrop.javaScriptDragAndDropToBottom(
					index = 1,
					key_collectionName = "Search",
					key_fragmentName = ${portletName},
					key_targetFragmentName = ${previousPortletName},
					locator1 = "PageEditor#FRAGMENTS_AND_WIDGETS_TAB_FRAGMENT",
					locator2 = "PageEditor#ANY_FRAGMENT_DROP_TARGET");
			}
			else {
				DragAndDrop.javaScriptDragAndDropToObject(
					key_indexItem = 1,
					key_portletName = ${portletName},
					locator1 = "PageEditor#FRAGMENTS_AND_WIDGETS_TAB_WIDGET",
					locator2 = "PageEditor#FRAGMENT_DROP_TARGET");
			}

			AssertElementNotPresent(locator1 = "Message#ERROR");

			PageEditor.viewFragment(fragmentName = ${portletName});

			var previousPortletName = ${portletName};
		}
	}

	@summary = "Default summary"
	macro addWidgetsOnWidgetPageViaUI(searchPortletList = null) {
		if (IsNotVisible(locator1 = "ControlMenuAddPanel#CLOSE_ADD_PANEL")) {
			Click.clickAt(locator1 = "ControlMenu#ADD");
		}

		AssertElementPresent(locator1 = "ControlMenuAddPanel#SIDEBAR_HEADER");

		Navigator.gotoNavTab(navTab = "Widgets");

		Type.sendKeysApplicationSearch(
			locator1 = "NavBar#APPLICATION_SEARCH_FIELD",
			value1 = "search");

		for (var portletName : list ${searchPortletList}) {
			Click.clickNoWaitForVisible(
				key_portletName = ${portletName},
				locator1 = "Search#ADD_PORTLET_LINK");

			var key_portletName = ${portletName};

			AssertElementNotPresent(locator1 = "Message#ERROR");

			AssertElementPresent(locator1 = "Portlet#LOADED");

			AssertElementPresent(locator1 = "Home#PORTLET");
		}
	}

	@summary = "Default summary"
	macro chooseEmbeddedScope(searchScope = null) {
		if ((${searchScope} == "Everything") || (${searchScope} == "This Site")) {
			Select(
				locator1 = "Search#EMBEDDED_SEARCH_BAR_SCOPE_SELECT",
				value1 = ${searchScope});
		}
		else {
			fail("Invalid search scope. Must be (Everything|This Site).");
		}
	}

	@summary = "Default summary"
	macro chooseSortOption(sortOption = null) {
		Click(locator1 = "Search#SORT_WIDGET_DROPDOWN");

		Click.clickNoMouseOver(
			locator1 = "Search#SORT_WIDGET_SORT_OPTION",
			sortOption = ${sortOption});
	}

	@summary = "Default summary"
	macro chooseWidgetScope(searchScope = null) {
		if ((${searchScope} == "Everything") || (${searchScope} == "This Site")) {
			Click.clickNoMouseOver(
				locator1 = "Search#SEARCH_BAR_WIDGET_SCOPE_SELECT",
				searchScope = ${searchScope});
		}
		else {
			fail("Invalid search scope. Must be (Everything|This Site).");
		}
	}

	@summary = "Default summary"
	macro configureCustomFilter(federatedSearchKey = null, filterQueryType = null, filterValue = null, occur = null, parentQueryName = null, queryName = null, customParameterName = null, filterField = null, portletIndex = null) {
		Portlet.gotoPortletOptions(
			portletIndex = ${portletIndex},
			portletName = "Custom Filter",
			portletOption = "Configuration");

		SelectFrame(locator1 = "IFrame#CONFIGURATION");

		if (isSet(customParameterName)) {
			Type(
				key_fieldLabel = "Custom Parameter Name",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${customParameterName});
		}

		if (isSet(federatedSearchKey)) {
			Type(
				key_fieldLabel = "Federated Search Key",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${federatedSearchKey});
		}

		if (isSet(filterField)) {
			Type(
				key_fieldLabel = "Filter Field",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${filterField});
		}

		if (isSet(filterQueryType)) {
			Select(
				key_fieldLabel = "Filter Query Type",
				locator1 = "Select#GENERIC_SELECT_FIELD",
				value1 = ${filterQueryType});
		}

		if (isSet(filterValue)) {
			Type(
				key_fieldLabel = "Filter Value",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${filterValue});
		}

		if (isSet(occur)) {
			Select(
				key_fieldLabel = "Occur",
				locator1 = "Select#GENERIC_SELECT_FIELD",
				value1 = ${occur});
		}

		if (isSet(queryName)) {
			Type(
				key_fieldLabel = "Query Name",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${queryName});
		}

		if (isSet(parentQueryName)) {
			Type(
				inputFieldId = "parentQueryName",
				locator1 = "TextInput#INPUT_ID",
				value1 = ${parentQueryName});
		}

		PortletEntry.save();

		IFrame.closeFrame();
	}

	@summary = "Default summary"
	macro configureEmbeddedSearchBar(federatedSearchKey = null, searchScope = null, invisible = null) {
		SearchPage.gotoEmbeddedOptions(portletOption = "Configuration");

		SelectFrame(locator1 = "IFrame#CONFIGURATION");

		if (${invisible} == "true") {
			Click(
				checkboxName = "Invisible",
				locator1 = "Checkbox#ANY_CHECKBOX_UNCHECKED");
		}
		else if (${invisible} == "false") {
			Click(
				checkboxName = "Invisible",
				locator1 = "Checkbox#ANY_CHECKBOX_CHECKED");
		}

		if (isSet(destinationPage)) {
			if (contains(${destinationPage}, " ")) {
				var destinationPage = StringUtil.replace(${destinationPage}, " ", "-");
			}

			var destinationPage = StringUtil.toLowerCase(${destinationPage});

			Type(
				locator1 = "Search#SEARCH_BAR_CONFIG_DESTINATION_PAGE",
				value1 = ${destinationPage});
		}

		if (isSet(federatedSearchKey)) {
			Type(
				key_fieldLabel = "Federated Search Key",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${federatedSearchKey});
		}

		if (isSet(searchScope)) {
			if ((${searchScope} == "Everything") || (${searchScope} == "Let the User Choose") || (${searchScope} == "This Site")) {
				Select(
					locator1 = "Select#SCOPE_CONFIGURATION",
					value1 = ${searchScope});
			}
			else {
				fail("Invalid search scope. Must be (Everything|Let the User Choose|This Site).");
			}
		}

		if (isSet(useAdvancedSearchSyntax)) {
			Click(
				checkboxName = "Use Advanced Search Syntax",
				locator1 = "Checkbox#ANY_CHECKBOX");
		}

		PortletEntry.save();

		IFrame.closeFrame();
	}

	@summary = "Default summary"
	macro configureLowLevelSearchOptions(federatedSearchKey = null, indexes = null, attributesKey = null, connectionId = null, attributesValue = null) {
		Portlet.gotoPortletOptions(
			portletName = "Low Level Search Options",
			portletOption = "Configuration");

		SelectFrame(locator1 = "IFrame#CONFIGURATION");

		if (isSet(connectionId)) {
			Select(
				key_fieldLabel = "Connection ID",
				locator1 = "Select#GENERIC_SELECT_FIELD",
				value1 = ${connectionId});
		}

		if (isSet(federatedSearchKey)) {
			Type(
				key_fieldLabel = "Federated Search Key",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${federatedSearchKey});
		}

		if (isSet(indexes)) {
			Type(
				key_fieldLabel = "Indexes",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${indexes});
		}

		if (isSet(attributesKey)) {
			Type(
				locator1 = "TextInput#KEY",
				value1 = ${attributesKey});

			Type(
				key_fieldLabel = "Value",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${attributesValue});
		}

		PortletEntry.save();

		IFrame.closeFrame();
	}

	@summary = "Default summary"
	macro configureSearchBarWidget(federatedSearchKey = null, scopeParameterName = null, searchScope = null, keywordsParameterName = null, index = null) {
		if (isSet(index)) {
			SearchPage.gotoSearchBarWidgetOptionsSpecific(
				index = ${index},
				portletOption = "Configuration");
		}
		else {
			SearchPage.gotoSearchBarWidgetOptions(portletOption = "Configuration");
		}

		SelectFrame(locator1 = "IFrame#CONFIGURATION");

		if (isSet(destinationPage)) {
			if (contains(${destinationPage}, " ")) {
				var destinationPage = StringUtil.replace(${destinationPage}, " ", "-");
			}

			var destinationPage = StringUtil.toLowerCase(${destinationPage});

			Type(
				locator1 = "Search#SEARCH_BAR_CONFIG_DESTINATION_PAGE",
				value1 = ${destinationPage});
		}

		if (isSet(keywordsParameterName)) {
			Type(
				locator1 = "Search#SEARCH_BAR_CONFIG_KEYWORDS_PARAMETER_NAME",
				value1 = ${keywordsParameterName});
		}

		if (isSet(searchScope)) {
			if ((${searchScope} == "Everything") || (${searchScope} == "Let the User Choose") || (${searchScope} == "This Site")) {
				Select(
					locator1 = "Select#SCOPE_CONFIGURATION",
					value1 = ${searchScope});
			}
			else {
				fail("Invalid search scope. Must be (Everything|Let the User Choose|This Site).");
			}
		}

		if (isSet(scopeParameterName)) {
			Type(
				locator1 = "Search#SEARCH_BAR_CONFIG_SCOPE_PARAMETER_NAME",
				value1 = ${scopeParameterName});
		}

		if (isSet(federatedSearchKey)) {
			Type(
				key_fieldLabel = "Federated Search Key",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${federatedSearchKey});
		}

		PortletEntry.save();

		IFrame.closeFrame();
	}

	@summary = "Default summary"
	macro configureSearchOptions(federatedSearchKey = null, allowEmptySearches = null, basicFacetSelection = null) {
		Portlet.gotoPortletOptions(
			portletName = "Search Options",
			portletOption = "Configuration");

		WaitForLiferayEvent.initializeLiferayEventLog();

		SelectFrameTop();

		SelectFrame(locator1 = "IFrame#CONFIGURATION");

		if (${allowEmptySearches} == "true") {
			Check(
				checkboxName = "Allow Empty Searches",
				locator1 = "Checkbox#ANY_CHECKBOX");
		}

		if (${basicFacetSelection} == "true") {
			Check(
				checkboxName = "Basic Facet Selection",
				locator1 = "Checkbox#ANY_CHECKBOX");
		}

		if (isSet(federatedSearchKey)) {
			Type(
				key_fieldLabel = "Federated Search Key",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${federatedSearchKey});
		}

		PortletEntry.save();

		IFrame.closeFrame();
	}

	@summary = "Default summary"
	macro configureSimilarResults(displayTemplate = null, maximumItemDisplay = null, searchScope = null, minimumDocumentFrequency = null, minimumTermFrequency = null, maximumDocumentFrequency = null, minimumShouldMatch = null, maximumQueryTerms = null, stopWords = null, minimumWordLength = null, analyzer = null, fields = null, linkBehavior = null, maximumWordLength = null) {
		Portlet.gotoPortletOptions(
			portletName = "Similar Results",
			portletOption = "Configuration");

		SelectFrame(locator1 = "IFrame#CONFIGURATION");

		if (isSet(analyzer)) {
			Type(
				key_fieldLabel = "Analyzer",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${analyzer});
		}

		if (isSet(displayTemplate)) {
			Click(locator1 = "Select#DISPLAY_TEMPLATE");

			MenuItem.click(menuItem = ${displayTemplate});
		}

		if (isSet(fields)) {
			Type(
				key_fieldLabel = "Fields",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${fields});
		}

		if (isSet(linkBehavior)) {
			Select(
				locator1 = "Select#SELECT_ID",
				selectFieldId = "linkBehavior",
				value1 = ${linkBehavior});
		}

		if (isSet(maximumDocumentFrequency)) {
			Type(
				key_fieldLabel = "Maximum Document Frequency",
				locator1 = "TextInput#GENERIC_NUMBER_INPUT",
				value1 = ${maximumDocumentFrequency});
		}

		if (isSet(maximumItemDisplay)) {
			Type(
				key_maximumItems = "Maximum Item Display",
				locator1 = "Search#SIMILAR_RESULTS_MAXIMUM_ITEM_DISPLAY",
				value1 = ${maximumItemDisplay});
		}

		if (isSet(maximumQueryTerms)) {
			Type(
				key_fieldLabel = "Maximum Query Terms",
				locator1 = "TextInput#GENERIC_NUMBER_INPUT",
				value1 = ${maximumQueryTerms});
		}

		if (isSet(maximumWordLength)) {
			Type(
				key_fieldLabel = "Maximum Word Length",
				locator1 = "TextInput#GENERIC_NUMBER_INPUT",
				value1 = ${maximumWordLength});
		}

		if (isSet(minimumDocumentFrequency)) {
			Type(
				key_fieldLabel = "Minimum Document Frequency",
				locator1 = "TextInput#GENERIC_NUMBER_INPUT",
				value1 = ${minimumDocumentFrequency});
		}

		if (isSet(minimumShouldMatch)) {
			Type(
				key_fieldLabel = "Minimum Should Match",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${minimumShouldMatch});
		}

		if (isSet(minimumTermFrequency)) {
			Type(
				key_fieldLabel = "Minimum Term Frequency",
				locator1 = "TextInput#GENERIC_NUMBER_INPUT",
				value1 = ${minimumTermFrequency});
		}

		if (isSet(minimumWordLength)) {
			Type(
				key_fieldLabel = "Minimum Word Length",
				locator1 = "TextInput#GENERIC_NUMBER_INPUT",
				value1 = ${minimumWordLength});
		}

		if (isSet(searchScope)) {
			Select(
				locator1 = "Select#SCOPE_CONFIGURATION",
				value1 = ${searchScope});
		}

		if (isSet(stopWords)) {
			Type(
				key_fieldLabel = "Stop Words",
				locator1 = "TextInput#GENERIC_TEXT_INPUT",
				value1 = ${stopWords});
		}

		PortletEntry.save();

		IFrame.closeFrame();
	}

	@summary = "Default summary"
	macro configureWidgetScope(searchScope = null) {
		SearchPage.gotoSearchBarWidgetOptions(portletOption = "Configuration");

		if ((${searchScope} == "Everything") || (${searchScope} == "Let the User Choose") || (${searchScope} == "This Site")) {
			SelectFrame(locator1 = "IFrame#CONFIGURATION");

			Select(
				locator1 = "Select#SCOPE_CONFIGURATION",
				value1 = ${searchScope});
		}
		else {
			fail("Invalid search scope. Must be (Everything|Let the User Choose|This Site).");
		}

		PortletEntry.save();

		IFrame.closeFrame();
	}

	@summary = "Default summary"
	macro getSearchTermURL(searchTerm = null) {
		if (contains(${searchPage}, " ")) {
			var searchPage = StringUtil.replace(${searchPage}, " ", "-");
		}

		var searchPage = StringUtil.toLowerCase(${searchPage});
		var portalURL = JSONCompany.getPortalURL();

		var searchURL = "${portalURL}/web/guest/${searchPage}?q=";

		var searchURL = "${searchURL}${searchTerm}";

		return ${searchURL};
	}

	@summary = "Default summary"
	macro gotoConfigureSuggestionsOptions(portletOption = null) {
		MouseOver.mouseOverNotVisible(locator1 = "Search#SUGGESTION_WIDGET_ELLIPSIS_ICON");

		Click(locator1 = "Search#SUGGESTION_WIDGET_ELLIPSIS_ICON");

		if (isSet(portletOption)) {
			var key_menuItem = ${portletOption};

			Click(locator1 = "MenuItem#ANY_MENU_ITEM");
		}
	}

	@summary = "Default summary"
	macro gotoEmbeddedOptions(portletOption = null) {
		MouseOver.mouseOverNotVisible(locator1 = "Search#EMBEDDED_SEARCH_BAR_ELLIPSIS_ICON");

		Click(locator1 = "Search#EMBEDDED_SEARCH_BAR_ELLIPSIS_ICON");

		if (isSet(portletOption)) {
			var key_menuItem = ${portletOption};

			Click(locator1 = "MenuItem#ANY_MENU_ITEM");
		}
	}

	@summary = "Default summary"
	macro gotoResultDetails(searchAssetTitle = null) {
		var key_searchAssetTitle = ${searchAssetTitle};

		AssertClick(
			locator1 = "SearchPage#RESULT_TITLE",
			value1 = ${searchAssetTitle});
	}

	@summary = "Default summary"
	macro gotoSearchBarWidgetOptions(portletOption = null) {
		MouseOver.mouseOverNotVisible(
			key_portletName = "Search Bar",
			locator1 = "Search#SEARCH_WIDGET_ELLIPSIS_ICON");

		Click(
			key_portletName = "Search Bar",
			locator1 = "Search#SEARCH_WIDGET_ELLIPSIS_ICON");

		if (isSet(portletOption)) {
			var key_menuItem = ${portletOption};

			Click(locator1 = "MenuItem#ANY_MENU_ITEM");
		}
	}

	@summary = "Default summary"
	macro gotoSearchBarWidgetOptionsSpecific(index = null, portletOption = null) {
		MouseOver.mouseOverNotVisible(
			key_index = ${index},
			key_portletName = "Search Bar",
			locator1 = "Search#SEARCH_WIDGET_ELLIPSIS_ICON_SPECIFIC");

		Click(
			key_index = ${index},
			key_portletName = "Search Bar",
			locator1 = "Search#SEARCH_WIDGET_ELLIPSIS_ICON_SPECIFIC");

		if (isSet(portletOption)) {
			var key_menuItem = ${portletOption};

			Click(locator1 = "MenuItem#ANY_MENU_ITEM");
		}
	}

	@summary = "Default summary"
	macro openSearchPage(searchTerm = null, locale = null) {
		if (!(isSet(siteURLKey))) {
			var siteURLKey = "guest";
		}

		if (isSet(searchTerm)) {
			Navigator.openWithAppendToBaseURL(urlAppend = "web/${siteURLKey}/search?q=${searchTerm}");
		}
		else if (isSet(locale)) {
			Navigator.openWithAppendToBaseURL(urlAppend = "${locale}/web/${siteURLKey}/search");
		}
		else {
			Navigator.openWithAppendToBaseURL(urlAppend = "web/${siteURLKey}/search");
		}
	}

	@summary = "Default summary"
	macro searchEmbedded(searchTerm = null, clickMagnifyingGlassIcon = null) {
		AssertElementPresent(locator1 = "Search#EMBEDDED_SEARCH_BAR");

		Type(
			locator1 = "Search#EMBEDDED_SEARCH_BAR",
			value1 = ${searchTerm});

		var browserType = PropsUtil.get("browser.type");

		if ((${browserType} == "safari") || (${clickMagnifyingGlassIcon} == "true")) {
			Click(locator1 = "Icon#BASIC_SEARCH");
		}
		else {
			KeyPress(
				locator1 = "Search#EMBEDDED_SEARCH_BAR",
				value1 = "\RETURN");
		}

		WaitForLiferayEvent.initializeLiferayEventLog();
	}

	@summary = "Default summary"
	macro searchWidget(searchTerm = null, clickMagnifyingGlassIcon = null) {
		Type(
			locator1 = "Search#SEARCH_BAR_WIDGET",
			value1 = ${searchTerm});

		if (${clickMagnifyingGlassIcon} == "true") {
			Click(locator1 = "Search#SEARCH_BAR_WIDGET_MAGNIFYING_GLASS_BUTTON");
		}
		else {
			KeyPress(
				locator1 = "Search#SEARCH_BAR_WIDGET",
				value1 = "\RETURN");
		}

		WaitForLiferayEvent.initializeLiferayEventLog();
	}

	@summary = "Default summary"
	macro setupSimilarResultsPage() {
		JSONLayout.addPublicLayout(
			groupName = "Guest",
			layoutName = "Similar Results Page");

		JSONLayout.addWidgetToPublicLayout(
			column = 1,
			groupName = "Guest",
			layoutName = "Similar Results Page",
			widgetName = "Asset Publisher");

		JSONLayout.addWidgetToPublicLayout(
			column = 2,
			groupName = "Guest",
			layoutName = "Similar Results Page",
			widgetName = "Similar Results");

		Navigator.gotoPage(pageName = "Similar Results Page");
	}

	@summary = "Default summary"
	macro viewResultDetails(searchAssetTitle = null) {
		AssertTextEquals(
			locator1 = "SearchPage#ASSET_DETAILS_TITLE",
			value1 = ${searchAssetTitle});
	}

	@summary = "Default summary"
	macro viewUserResultDetails(userName = null, pageName = null) {
		AssertTextEquals(
			locator1 = "Home#SITE_NAME",
			value1 = ${userName});

		AssertTextEquals(
			locator1 = "Home#PAGE_1",
			value1 = ${pageName});
	}

}