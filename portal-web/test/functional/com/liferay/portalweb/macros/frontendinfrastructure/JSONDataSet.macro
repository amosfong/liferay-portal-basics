definition {

	@summary = "Default summary"
	macro _createDataSetEntry(restSchema = null, restApplication = null, dataSetName = null, restEndpoint = null) {
		Variables.assertDefined(parameterList = "${dataSetName},${restApplication},${restEndpoint},${restSchema}");

		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		var curl = '''
			${portalURL}/o/data-set-manager/entries \
				-u ${userEmailAddress}:${userPassword} \
				-H accept: application/json \
				-H Content-Type: application/json \
				-d {
					"label": "${dataSetName}",
					"restApplication": "${restApplication}",
					"restEndpoint": "${restEndpoint}",
					"restSchema": "${restSchema}"
				}
		''';

		JSONCurlUtil.post(${curl});

		var dataSetEntriestIdList = JSONDataSet._getDataSetEntryIds();

		if (${dataSetEntriestIdList} == "") {
			fail("FAIL. No DataSet entry was created");
		}
	}

	@summary = "Default summary"
	macro _createFDSViewViaAPI(defaultItemsPerPage = null, listOfItemsPerPage = null, dataSetViewName = null, dataSetName = null) {
		Variables.assertDefined(parameterList = "${dataSetName},${dataSetViewName}");

		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		if (!(isSet(dataSetViewDescription))) {
			var dataSetViewDescription = "";
		}

		var dataSetEntryId = JSONDataSet._getDataSetEntryIdByName(dataSetName = ${dataSetName});

		if (${dataSetEntryId} != "") {
			var curl = '''
				${portalURL}/o/data-set-manager/data-sets \
					-u ${userEmailAddress}:${userPassword} \
					-H accept: application/json \
					-H Content-Type: application/json \
					-d {
						"symbol": "catalog",
						"description": "${dataSetViewDescription}",
						"defaultItemsPerPage": ${defaultItemsPerPage},
						"listOfItemsPerPage": "${listOfItemsPerPage}",
						"label": "${dataSetViewName}",
						"r_fdsEntryFDSViewRelationship_l_fdsEntryId": ${dataSetEntryId}
					}
			''';

			JSONCurlUtil.post(${curl});
		}
		else {
			echo("FAIL. No data sets was found");
		}
	}

	@summary = "Default summary"
	macro _deleteFDSEntry() {
		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		if (!(isSet(dataSetEntriesIdList))) {
			var dataSetEntriesIdList = JSONDataSet._getDataSetEntryIds();
		}

		if (${dataSetEntriesIdList} != "") {
			for (var dataSetEntryId : list ${dataSetEntriesIdList}) {
				var curl = '''
					${portalURL}/o/data-set-manager/entries/${dataSetEntryId} \
						-u ${userEmailAddress}:${userPassword}
				''';

				JSONCurlUtil.delete(${curl});
			}
		}
		else {
			echo("FAIL. No DataSets entries to be deleted");
		}
	}

	@summary = "Default summary"
	macro _deleteFDSViews() {
		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		if (!(isSet(dataSetIdList))) {
			var dataSetIdList = JSONDataSet._getDataSetIds();
		}

		if (${dataSetIdList} != "") {
			for (var dataSetIds : list ${dataSetIdList}) {
				var curl = '''
					${portalURL}/o/data-set-manager/data-sets/${dataSetIds} \
						-u ${userEmailAddress}:${userPassword}
				''';

				JSONCurlUtil.delete(${curl});
			}
		}
		else {
			echo("FAIL. No Data Sets Views to be deleted");
		}
	}

	@summary = "Default summary"
	macro _getDataSetEntryIdByName(dataSetName = null) {
		Variables.assertDefined(parameterList = ${dataSetName});

		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		var curl = '''
			${portalURL}/o/data-set-manager/entries \
				-u ${userEmailAddress}:${userPassword}
		''';

		var dataSetEntryId = JSONCurlUtil.get(${curl}, "$.items[?(@.label=='${dataSetName}')].id");

		if (${dataSetEntryId} == "") {
			fail("FAIL. No data sets was found");
		}
		else {
			return ${dataSetEntryId};
		}
	}

	@summary = "Default summary"
	macro _getDataSetEntryIds() {
		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		var curl = '''
			${portalURL}/o/data-set-manager/entries \
				-u ${userEmailAddress}:${userPassword}
		''';

		var siteId = JSONCurlUtil.get(${curl}, "$..items[0].creator.id");

		var dataSetEntryIds = JSONCurlUtil.get(${curl}, "$.items[?(@.id!='${siteId}')].id");

		if (${dataSetEntryIds} == "") {
			fail("FAIL. No data sets was found");
		}
		else {
			return ${dataSetEntryIds};
		}
	}

	@summary = "Default summary"
	macro _getDataSetIds() {
		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		var curl = '''
			${portalURL}/o/data-set-manager/data-sets \
				-u ${userEmailAddress}:${userPassword}
		''';

		var siteId = JSONCurlUtil.get(${curl}, "$..items[0].creator.id");

		var dataSetIds = JSONCurlUtil.get(${curl}, "$.items[?(@.id!='${siteId}')].id");

		return ${dataSetIds};
	}

	@summary = "Default summary"
	macro _getDataSetViewIdByName(dataSetViewsNameList = null) {
		Variables.assertDefined(parameterList = ${dataSetViewsNameList});

		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if (!(isSet(userPassword))) {
			var userPassword = PropsUtil.get("default.admin.password");
		}

		var curl = '''
			${portalURL}/o/data-set-manager/data-sets \
				-u ${userEmailAddress}:${userPassword}
		''';
		var dataSetViewsIds = "";

		for (var dataSetViewName : list ${dataSetViewsNameList}) {
			var dataSetViewId = JSONCurlUtil.get(${curl}, "$.items[?(@.label=='${dataSetViewName}')].id");

			var dataSetViewsIds = StringUtil.add(${dataSetViewsIds}, "${dataSetViewId},");
		}

		if (${dataSetViewsIds} == "") {
			fail("FAIL. No data set views were found");
		}
		else {
			return ${dataSetViewsIds};
		}
	}

}