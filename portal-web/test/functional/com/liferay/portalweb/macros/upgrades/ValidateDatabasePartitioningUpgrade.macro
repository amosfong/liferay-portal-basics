definition {

	@summary = "Validates data persistence and that the basic portal functionalities are working correctly after an upgrade is executed with database partitioning enabled"
	macro viewUpgradeDBPartition() {
		SignOut.signOut();

		User.firstLoginUI(
			password = PropsUtil.get("default.admin.password"),
			specificURL = "http://www.able.com:8080",
			userEmailAddress = "test@www.able.com");

		User.openUsersAdmin(baseURL = "http://www.able.com:8080");

		User.viewCP(
			userEmailAddress = "test1@www.able.com",
			userFirstName = "Test1",
			userLastName = "Test1",
			userScreenName = "test1");

		User.openUsersAdmin(baseURL = "http://www.able.com:8080");

		User.searchCP(searchTerm = "test2");

		User.viewNoUsersFoundCP();

		Role.openRolesAdmin(baseURL = "http://www.able.com:8080");

		Role.viewCP(
			roleTitle = "Roles Regrole1 Name",
			roleType = "Regular");

		Navigator.openSpecificURL(url = "http://www.able.com:8080");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Documents and Media");

		DMNavigator.gotoDocumentCP(dmDocumentTitle = "DM Document1 Title");

		DMDocument.viewCP(dmDocumentTitle = "DM Document1 Title");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Web Content");

		WebContent.viewWithStructureCP(
			webContentRichText = "WC WebContent1 Content",
			webContentRichTextFieldLabel = "content",
			webContentTitle = "WC WebContent1 Title");

		SignOut.signOut();

		User.firstLoginUI(
			password = PropsUtil.get("default.admin.password"),
			specificURL = "http://www.baker.com:8080",
			userEmailAddress = "test@www.baker.com");

		User.openUsersAdmin(baseURL = "http://www.baker.com:8080");

		User.viewCP(
			userEmailAddress = "test2@www.baker.com",
			userFirstName = "Test2",
			userLastName = "Test2",
			userScreenName = "test2");

		User.openUsersAdmin(baseURL = "http://www.baker.com:8080");

		User.searchCP(searchTerm = "test1");

		User.viewNoUsersFoundCP();

		Role.openRolesAdmin(baseURL = "http://www.baker.com:8080");

		Role.viewCP(
			roleTitle = "Roles Regrole2 Name",
			roleType = "Regular");

		Navigator.openSpecificURL(url = "http://www.baker.com:8080");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Documents and Media");

		DMNavigator.gotoDocumentCP(dmDocumentTitle = "DM Document2 Title");

		DMDocument.viewCP(dmDocumentTitle = "DM Document2 Title");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Web Content");

		WebContent.viewWithStructureCP(
			webContentRichText = "WC WebContent2 Content",
			webContentRichTextFieldLabel = "content",
			webContentTitle = "WC WebContent2 Title");

		ValidateCalendarUpgrade.viewMatchingCalendarIndexesInPartitionedDatabase();
	}

}