task runGradleTest

runGradleTest {
	dependsOn ":client-extension-batch:createClientExtensionConfig"

	doLast {
		Project batchProject = project(":client-extension-batch")

		File file = batchProject.fileTree(batchProject.buildDir) {
			include "**/object-entry.batch-engine-data.json"
		}.singleFile

		assert !file.text.contains("@batch_object_entry_file_base64@")
		assert file.text.contains('{"fileBase64":"Zm9vCg==","name":"foo_filename_1.txt"}')
		assert file.text.contains('{"fileBase64":"YmFyCg==","name":"foo_filename_2.txt"}')
		assert file.text.contains('{"fileBase64":"YmF6Cg==","name":"foo_filename_3.txt"}')
	}
}