definition {

	@summary = "Default summary"
	macro assertProcessedItemsCountWithCompletedStatus(response = null, expectedCount = null) {
		Variables.assertDefined(parameterList = "${expectedCount},${response}");

		var actualCount = JSONUtil.getWithJSONPath(${response}, "$..[?(@['executeStatus'] == 'COMPLETED')]['processedItemsCount']");

		TestUtils.assertEquals(
			actual = ${actualCount},
			expected = ${expectedCount});
	}

	@summary = "Default summary"
	macro createExportTask(className = null, contentType = null) {
		Variables.assertDefined(parameterList = "${className},${contentType}");

		var portalURL = JSONCompany.getPortalURL();
		var userPassword = PropsUtil.get("default.admin.password");

		var curl = '''
			${portalURL}/o/headless-batch-engine/v1.0/export-task/${className}/${contentType}?flatten=true \
				-u test@liferay.com:${userPassword} \
				-H Content-Type: application/json
		''';

		var curl = JSONCurlUtil.post(${curl});

		return ${curl};
	}

	@summary = "Default summary"
	macro getExportTaskById(exportTaskId = null) {
		Variables.assertDefined(parameterList = ${exportTaskId});

		var portalURL = JSONCompany.getPortalURL();
		var siteId = JSONGroupAPI._getGroupIdByNameNoSelenium(
			groupName = "Guest",
			site = "true");
		var userPassword = PropsUtil.get("default.admin.password");

		var curl = '''
			${portalURL}/o/headless-batch-engine/v1.0/export-task/${exportTaskId} \
				-u test@liferay.com:${userPassword} \
				-H Content-Type: application/json
		''';

		var curl = JSONCurlUtil.get(${curl});

		return ${curl};
	}

}