definition {

	@summary = "Default summary"
	macro executeGraphQLQuery(query = null, token = null) {
		var portalURL = JSONCompany.getPortalURL();
		var userPassword = PropsUtil.get("default.admin.password");
		var curl = '''
			${portalURL}/o/graphql \
				-H Content-Type: application/json \
				-d {"query":"${query}"}
		''';

		if (isSet(token)) {
			var curl = StringUtil.add(${curl}, " -H 'Authorization: Bearer ${token}'", "");
		}
		else {
			var curl = StringUtil.add(${curl}, " -u test@liferay.com:${userPassword}", "");
		}

		var response = JSONCurlUtil.post(${curl});

		return ${response};
	}

}