definition {

	@summary = "Default summary"
	macro _curlAPISort(virtualHost = null) {
		if (isSet(virtualHost)) {
			if (!(isSet(port))) {
				var port = 8080;
			}

			var portalURL = "http://${virtualHost}:${port}";
		}
		else {
			var portalURL = JSONCompany.getPortalURL();
		}

		var api = "headless-builder/sorts";
		var userPassword = PropsUtil.get("default.admin.password");

		var curl = '''
			${portalURL}/o/${api} \
				-u test@liferay.com:${userPassword} \
				-H Content-Type: application/json
		''';

		return ${curl};
	}

	@summary = "Default summary"
	macro createAPISort(sortValue = null, endpointERC = null, virtualHost = null) {
		Variables.assertDefined(parameterList = "${sortValue},${endpointERC}");

		var curl = SortAPI._curlAPISort(virtualHost = ${virtualHost});
		var body = '''
			"oDataSort": "${sortValue}",
			"r_apiEndpointToAPISorts_l_apiEndpointERC": ${endpointERC}
		''';

		var curl = StringUtil.add(${curl}, " -d { ${body} }", "");

		var response = JSONCurlUtil.post(${curl});

		return ${response};
	}

}