definition {

	@summary = "Default summary"
	macro getElementCirclePositionX(elementClass = null, childIndex = null) {
		WaitForSPARefresh();

		var javascript = '''
		let elem = document.querySelectorAll('*.${elementClass}')[${childIndex}];

		let elementCoordinates = elem.getBoundingClientRect();

		let leftPositionX = Math.round(elementCoordinates.x);

		let centerPositionX = (leftPositionX + (elementCoordinates.width)/2).toString();

		return centerPositionX;
		''';

		var position_x = selenium.getEval(${javascript});

		return ${position_x};
	}

	@summary = "Default summary"
	macro getElementCirclePositionY(elementClass = null, childIndex = null) {
		WaitForSPARefresh();

		var javascript = '''
		let elem = document.querySelectorAll('*.${elementClass}')[${childIndex}];

		let elementCoordinates = elem.getBoundingClientRect();

		let topPositionY = Math.round(elementCoordinates.y);

		let centerPositionY = (topPositionY + (elementCoordinates.width)/2).toString();

		return centerPositionY;
		''';

		var position_y = selenium.getEval(${javascript});

		return ${position_y};
	}

	@summary = "Default summary"
	macro getElementRectanglePositionX(elementId = null) {
		WaitForSPARefresh();

		var javascript = '''
		let elem = document.querySelector('#${elementId}');

		let elementCoordinates = elem.getBoundingClientRect();

		let positionX = Math.round(elementCoordinates.x).toString();

		return positionX;
		''';

		var position_x = selenium.getEval(${javascript});

		return ${position_x};
	}

	@summary = "Default summary"
	macro getElementRectanglePositionY(elementId = null) {
		WaitForSPARefresh();

		var javascript = '''
		let elem = document.querySelector('#${elementId}');

		let elementCoordinates = elem.getBoundingClientRect();

		let positionY = Math.round(elementCoordinates.y).toString();

		return positionY;
		''';

		var position_y = selenium.getEval(${javascript});

		return ${position_y};
	}

	@summary = "Default summary"
	macro viewCoordinatePositionMatchesElementStep(hotspotElementClass = null, stepElementId = null) {
		var step_x = WalkthroughPopover.getElementRectanglePositionX(elementId = ${stepElementId});
		var step_y = WalkthroughPopover.getElementRectanglePositionY(elementId = ${stepElementId});
		var hotspotChildIndex = 1;

		if (contains(${stepElementId}, "teststep")) {
			var hotspotChildIndex = 0;
		}

		var hotspot_x = WalkthroughPopover.getElementCirclePositionX(
			childIndex = ${hotspotChildIndex},
			elementClass = ${hotspotElementClass});
		var hotspot_y = WalkthroughPopover.getElementCirclePositionY(
			childIndex = ${hotspotChildIndex},
			elementClass = ${hotspotElementClass});

		echo("position step (x,y): ${step_x},${step_y}");

		echo("position hotspot (x,y): ${hotspot_x},${hotspot_y}");

		if (${step_x} != ${hotspot_x}) {
			fail("FAIL. X coordinate positions do not match.");
		}

		if (${step_y} != ${hotspot_y}) {
			fail("FAIL. Y coordinate positions do not match.");
		}
	}

}